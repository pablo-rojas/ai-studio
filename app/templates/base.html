<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Studio - {% block title %}{% endblock %}</title>
  <script>
    (() => {
      const storageKey = "ai-studio-theme";
      let theme = "light";

      try {
        const storedTheme = localStorage.getItem(storageKey);
        if (storedTheme === "light" || storedTheme === "dark") {
          theme = storedTheme;
        } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          theme = "dark";
        }
      } catch (_error) {
        if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
          theme = "dark";
        }
      }

      if (theme === "dark") {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    })();
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode: "class" };
  </script>
  <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}">
  <script src="{{ url_for('static', path='js/htmx.min.js') }}"></script>
  <script src="{{ url_for('static', path='js/alpine.min.js') }}" defer></script>
  <script src="{{ url_for('static', path='js/app.js') }}" defer></script>
  {% block head %}{% endblock %}
</head>
<body class="min-h-screen bg-slate-50 text-slate-900 transition-colors dark:bg-slate-950 dark:text-slate-100">
  {% include "components/topbar.html" %}
  {% include "components/navbar.html" %}
  <main class="mx-auto w-full max-w-[96vw] p-6">
    {% block content %}{% endblock %}
  </main>
  <div id="toast-container" class="pointer-events-none fixed right-4 top-4 z-50"></div>
  {% block scripts %}{% endblock %}
</body>
</html>
