<section id="training-experiment-list" class="space-y-2">
  {% if experiments %}
    {% for experiment in experiments %}
    {% set is_selected = selected_experiment_id == experiment.id %}
    {% set status = experiment.status %}
    {% if status == "completed" %}
      {% set status_classes = "bg-emerald-100 text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-200" %}
    {% elif status in ("pending", "training") %}
      {% set status_classes = "bg-sky-100 text-sky-800 dark:bg-sky-500/20 dark:text-sky-200" %}
    {% elif status == "failed" %}
      {% set status_classes = "bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-200" %}
    {% elif status == "cancelled" %}
      {% set status_classes = "bg-amber-100 text-amber-800 dark:bg-amber-500/20 dark:text-amber-200" %}
    {% else %}
      {% set status_classes = "bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-200" %}
    {% endif %}
    <button
      type="button"
      hx-get="/api/training/{{ project_id }}/experiments/{{ experiment.id }}"
      hx-target="#training-experiment-workspace"
      hx-swap="outerHTML"
      hx-push-url="/projects/{{ project_id }}/training?experiment_id={{ experiment.id }}"
      class="w-full rounded-lg border p-3 text-left text-sm transition {% if is_selected %}border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-500/10{% else %}border-slate-200 bg-white hover:border-slate-300 dark:border-slate-800 dark:bg-slate-900 dark:hover:border-slate-700{% endif %}"
    >
      <div class="flex items-center justify-between gap-2">
        <p class="truncate font-medium text-slate-900 dark:text-slate-100">{{ experiment.name }}</p>
        <span class="rounded-full px-2 py-0.5 text-[11px] font-medium uppercase tracking-wide {{ status_classes }}">
          {{ status }}
        </span>
      </div>
      <p class="mt-1 truncate text-xs text-slate-500 dark:text-slate-400">{{ experiment.id }}</p>
      {% if experiment.best_metric_value is not none %}
      <p class="mt-2 text-xs text-slate-600 dark:text-slate-300">
        Best metric: <span class="font-medium">{{ "%.4f"|format(experiment.best_metric_value) }}</span>
      </p>
      {% else %}
      <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Best metric: â€”</p>
      {% endif %}
    </button>
    {% endfor %}
  {% else %}
    <p class="rounded-lg border border-dashed border-slate-300 bg-slate-50 p-4 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-300">
      No experiments created yet.
    </p>
  {% endif %}
</section>
